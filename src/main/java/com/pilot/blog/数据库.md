# 数据库基础与原理

## 数据库基础和SQL知识体系详解

**基础与理论**

[SQL DB - 关系型数据库是如何工作的]()

- 很多人在学习数据时都是孤立的学习知识点，这样是很难将所有知识点串起来深入理解；强烈推荐你学习两篇文章：[Architecture of a Database System  (opens new window)](https://dsf.berkeley.edu/papers/fntdb07-architecture.pdf)以及[How does a relational database work  (opens new window)](http://coding-geek.com/how-databases-work)；本文主要在第二篇基础上翻译并梳理，如果你英文不好的话，你可以通过本文帮助你构筑数据库体系的基础

[SQL DB - 关系型数据库设计理论]()

- 在上文了解数据库如何工作后，本节介绍如何将一个**关系模型**（基于表的数据模型）合理的转化为**数据表**和**关系表**，以及确定**主外健**的。这便是数据库设计理论基础，包括术语，函数依赖，范式等理论基础

[SQL DB - 关系型数据库设计流程]()

- 在上文知道如何设计表和健后，让我们再看看整个的**数据库设计的标准流程**吧，主要包括`需求分析`, `概念结构设计`, `逻辑结构设计` , `物理设计`, `实施阶段`和`运行和维护阶段`这6个阶段

[SQL DB - 数据库系统核心知识点]()

- 基于上篇数据库如何工作的基础之上，我们再来梳理下数据库系统中有哪些重要的知识点，包括：事务，并发一致性，封锁，隔离级别，多版本并发控制等

**SQL语言基础和进阶**

[SQL语言 - SQL语法基础]()

- 本文包含了所有SQL语言的基础语法，并用例子的方式向你展示

[SQL语言 - SQL语句练习]()

- 在上文学习了SQL的基本语法以后，本文将通过最经典的“教师-学生-成绩”表来帮助你练习SQL。@pdai

[SQL语言 - SQL题目进阶]()

- 接下来，通过Leetcode上的SQL题目进行进阶吧

[SQL语言 - SQL语句优化]()

- 最后，再总结一些SQL语句的优化建议

## SQL DB - 关系型数据库是如何工作的

### 从数据结构说起

#### **时间复杂度**

> 对于数据库而言，重要的不是数据量，而是当数据量增加时运算如何增加。

时间复杂度用来检验某个算法处理一定量的数据要花多长时间，时间复杂度不会给出确切的运算次数，但是给出的是一种理念。

![img](https://pdai-1257820000.cos.ap-beijing.myqcloud.com/pdai.tech/public/_images/db/sb-sql-learn-1.png)

- 绿：O(1)或者叫常数阶复杂度，保持为常数（要不人家就不会叫常数阶复杂度了）。
- 红：O(log(n))对数阶复杂度，即使在十亿级数据量时也很低。
- 粉：最糟糕的复杂度是 O(n^2)，平方阶复杂度，运算数快速膨胀。
- 黑和蓝：另外两种复杂度（的运算数也是）快速增长。

如果要处理2000条元素：

- O(1) 算法会消耗 1 次运算
- O(log(n)) 算法会消耗 7 次运算
- O(n) 算法会消耗 2000 次运算
- O(n*log(n)) 算法会消耗 14,000 次运算
- O(n^2) 算法会消耗 4,000,000 次运算

#### 归并排序



#### 二叉搜索树



#### B+树索引



#### 哈希表



#### 全局概览



#### 核心组件



#### 工具



#### 查询管理器





## SQL DB - 关系型数据库设计理论



## SQL DB - 关系型数据库设计流程



## SQL DB - 数据库系统核心知识点





# SQL语言

## SQL语言 - SQL语法基础

## SQL语言 - SQL语句练习

## SQL语言 - SQL题目进阶

## SQL语言 - SQL语句优化



# SQL - MySQL

## MySQL知识体系详解



## MySQL - 数据类型



## MySQL - 存储引擎

### InnoDB

是 MySQL 默认的事务型存储引擎，**只有在需要它不支持的特性时，才考虑使用其它存储引擎**。

实现了四个标准的隔离级别，默认级别是可重复读(REPEATABLE READ)。在可重复读隔离级别下，通过多版本并发控制(MVCC)+ 间隙锁(Next-Key Locking)防止幻影读。

主索引是聚簇索引，在索引中保存了数据，从而避免直接读取磁盘，因此对查询性能有很大的提升。

内部做了很多优化，包括从磁盘读取数据时采用的可预测性读、能够加快读操作并且自动创建的自适应哈希索引、能够加速插入操作的插入缓冲区等。

支持真正的在线热备份。其它存储引擎不支持在线热备份，要获取一致性视图需要停止对所有表的写入，而在读写混合场景中，停止写入可能也意味着停止读取。

### MyISAM

设计简单，数据以紧密格式存储。对于只读数据，或者表比较小、可以容忍修复操作，则依然可以使用它。

提供了大量的特性，包括压缩表、空间数据索引等。

**不支持事务**。

不支持行级锁，只能对整张表加锁，读取时会对需要读到的所有表加共享锁，写入时则对表加排它锁。但在表有读取操作的同时，也可以往表中插入新的记录，这被称为并发插入(CONCURRENT INSERT)。

可以手工或者自动执行检查和修复操作，但是和事务恢复以及崩溃恢复不同，可能导致一些数据丢失，而且修复操作是非常慢的。

如果指定了 DELAY_KEY_WRITE 选项，在每次修改执行完成时，不会立即将修改的索引数据写入磁盘，而是会写到内存中的键缓冲区，只有在清理键缓冲区或者关闭表的时候才会将对应的索引块写入磁盘。这种方式可以极大的提升写入性能，但是在数据库或者主机崩溃时会造成索引损坏，需要执行修复操作。

### 比较

- 事务: InnoDB 是事务型的，可以使用 Commit 和 Rollback 语句。
- 并发: MyISAM 只支持表级锁，而 InnoDB 还支持行级锁。
- 外键: InnoDB 支持外键。
- 备份: InnoDB 支持在线热备份。
- 崩溃恢复: MyISAM 崩溃后发生损坏的概率比 InnoDB 高很多，而且恢复的速度也更慢。
- 其它特性: MyISAM 支持压缩表和空间数据索引。

## MySQL - 索引(B+树)



## MySQL - 性能优化



## MySQL - 分表分库



## MySQL - 主从复制与读写分离



## MySQL - MySQL InnoDB的MVCC实现机制



## MySQL - 一条 SQL 的执行过程详解





# NoSQL - Redis

## Redis教程 - Redis知识体系详解



## Redis入门 - Redis概念和基础



## Redis入门 - 数据类型：5种基础数据类型详解



## Redis入门 - 数据类型：3种特殊类型详解



## Redis入门 - 数据类型：Stream详解



## Redis进阶 - 数据结构：对象机制详解



## Redis进阶 - 数据结构：底层数据结构详解



## Redis进阶 - 数据结构：redis对象与编码(底层结构)对应关系详解



## Redis进阶 - 持久化：RDB和AOF机制详解



## Redis进阶 - 消息传递：发布订阅模式详解



## Redis进阶 - 事件：Redis事件机制详解



## Redis进阶 - 事务：Redis事务详解



## Redis进阶 - 高可用：主从复制详解



## Redis进阶 - 高可用：哨兵机制（Redis Sentinel）详解



## Redis进阶 - 高可拓展：分片技术（Redis Cluster）详解



## Redis进阶 - 缓存问题：一致性, 穿击, 穿透, 雪崩, 污染等



## Redis进阶 - 版本特性: Redis4.0、5.0、6.0特性整理



## Redis进阶 - 运维监控：Redis的监控详解



## Redis进阶 - 性能调优：Redis性能调优详解



## Redis大厂经验 - 微博：万亿级日访问量下，Redis在微博的9年优化历程



## Redis面试 - redis问题总结





# NoSQL - MongoDB

略

# NoSQL - ElasticSearch

略

